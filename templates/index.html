<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Stock Market Predictions</title>
        <!-- Font Awesome icons (free version)-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
        <!-- D3 -->
        <!-- <script src="https://d3js.org/d3.v5.min.js"></script> -->
        <!-- Boot Strap -->
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> -->
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../static/css/styles.css" rel="stylesheet">
        <!-- Fonts CSS-->
        <link rel="stylesheet" href="../static/css/heading.css">
        <link rel="stylesheet" href="../static/css/body.css">
        <style>
            .y-axis line {
                opacity:.2;
            }
            .y-axis path {
                display:none;
            }
            .line {
                fill: none;
                stroke-width: 3px;
                opacity: 0.9;
            }
            
            .legend rect {
                fill: white;
                stroke: black;
                opacity: 0.8;
            }
            
            .overlay {
                fill: none;
                pointer-events: all;
            }
            .lineHoverText {
                text-shadow:
                -2px -2px 0 #fff,
                2px -2px 0 #fff,
                -2px 2px 0 #fff,
                2px 2px 0 #fff;
            }
            .hoverCircle {
                stroke: black;
                opacity: 2;
            }
        </style>
    </head>
    <body id="page-top">
        <!-- Nav-Bar -->
        <!-- bg-seconary = navbar color -->
        <nav class="navbar navbar-expand-lg bg-secondary fixed-top" id="mainNav">
            <div class="container"><a class="navbar-brand js-scroll-trigger" href="#page-top">Stock Prediction</a>
                <button class="navbar-toggler navbar-toggler-right font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">Menu <i class="fas fa-bars"></i></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">About</a>
                        </li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#visuals">Visuals</a>
                        </li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contributors">Contributors</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- bg-seconary = header background color -->
        <header class="masthead bg-primary text-white text-center">
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Avatar Image-->
                <img class="masthead-avatar mb-5" src="..\static\assets\img\stockmarket.jpg" alt="Stock Pic">
                <!-- Masthead Heading-->
                <h1 class="masthead-heading mb-0 head-space">Predictive Analysis of Stock Market Trends</h1>
            </div>
        </header>
        <!-- About Section -->
        <section class="page-section bg-secondary text-red mb-0" id="about">
            <div class="container">
                <!-- About Section Heading-->
                <div class="text-center">
                    <h2 class="head-space page-section-heading d-inline-block text-red">About</h2>
                </div>
                <!-- About Section Content-->
                <div class="row justify-content-center">
                    <div class="d-flex flex-column aligh-self-center d-inline-block">
                        <img width="400" class="" src="..\static\assets\img\bull-bear.jpg" alt="Bull-Bear">
                    </div>
                </div>
                <div class="row">
                    <div class="col align-self-center ml-auto form-check-inline">
                        <p class="pre-wrap lead title-space">With a worldwide pandemic and the economy in shambles, we wanted to see if we're able to help uncertain people in an uncertain world survive through the tough times ahead of us. What better way to assist the people in need than to help guide them in the right direction to intelligently select which stocks to invest in?</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col align-self-center ml-auto form-check-inline">
                        <p class="pre-wrap lead title-space">The basis of this project is to see if we are able to create a machine learning model to predict the future for stock market prices. To test the accuracy of the model, we will select a company's stock within a period of time. From there, we trained the model with 20 years worth of data. After that, we tested to see if it's able to work to predict future stock prices.</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col align-self-center ml-auto form-check-inline">
                        <p class="pre-wrap lead title-space">After all this, just how accurate can an AI predict the future stock prices?</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Visuals Section -->
        <section class="page-section bg-white visuals" id="visuals">
            <div class="container">
                <!-- Visuals Section Heading-->
                <div class="text-center">
                    <h2 class="head-space page-section-heading text-secondary mb-0 d-inline-block">Visuals</h2>
                    <hr class="dotted">
                </div>
                <!-- Visuals Grid Items-->
                <div class="row justify-content-center">
                    <!-- Visuals Items-->
                    <div class="col align-self-center col-lg-auto col-md-auto">
                        <div class="text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                        <select id="selectbox"></select>
                        <h1 class="text-secondary">Open Stocks Prediction Over Time (2020)</h1>
                        <svg id="chart" width="1000" height="700"></svg>
                    </div>
                </div>
            </div>
        </section>
        <!-- Contributors Section -->
        <section class="page-section" id="contributors">
            <div class="container">
                <!-- Contributors Section Heading-->
                <div class="text-center">
                    <h2 class="head-space page-section-heading text-info d-inline-block mb-0">Contributors</h2>
                    <hr class="dotted">
                </div>
                <!-- Contributors Section Content-->
                <div class="row justify-content-center">
                    <div class="col-lg-4 col-md-6">
                        <div class="d-flex flex-column align-items-center">
                            <img style="margin: 100px" width="200" class="" src="..\static\assets\img\collaboration.png" alt="collab">
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="align-self-center col-lg-auto col-md-auto">
                        <p class="pre-wrap lead text-info font-weight-bold">Joseph Miller</p>
                        <div class="text-muted">Contact</div><a class="lead font-weight-bold" target="_blank" href="https://www.linkedin.com/in/joseph-miller-756440168/">LinkedIn</a>
                    </div>
                    <div class="align-self-center col-lg-auto col-md-auto">
                        <p class="pre-wrap lead text-info font-weight-bold">Criselda Dimacali</p>
                        <div class="text-muted">Contact</div><a class="lead font-weight-bold" target="_blank" href="https://www.linkedin.com/in/criselda-d-b45623105:">LinkedIn</a>
                    </div>
                    <div class="align-self-center col-lg-auto col-md-auto">
                        <p class="pre-wrap lead text-info font-weight-bold">Kelby Wilson</p>
                        <div class="text-muted">Contact</div><a class="lead font-weight-bold" target="_blank" href="https://www.linkedin.com/in/kelby-wilson/:">LinkedIn</a>
                    </div>
                    <div class="align-self-center col-lg-auto col-md-auto">
                        <p class="pre-wrap lead text-info font-weight-bold">Nehemiah Dang</p>
                        <div class="text-muted">Contact</div><a class="lead font-weight-bold" target="_blank" href="https://www.linkedin.com/in/nehemiah-dang-24a975197/">LinkedIn</a>
                    </div>
                </div>
                <!-- Tools Section-->
                <div class="text-center">
                    <h3 class="title-space d-inline-block text-yellow">Tools Used</h3>
                    <hr class="dotted">
                </div>
                <div class="row">
                    <div class="col align-self-center col-md-auto">
                        <img width="100" class="" src="..\static\assets\img\html-logo.png" alt="html">
                        <img width="75" class="" src="..\static\assets\img\css-logo.png" alt="css">
                        <img width="110" class="" src="..\static\assets\img\javascript-logo.png" alt="javascript">
                        <img width="75" class="" src="..\static\assets\img\bootstrap.png" alt="bootstrap">
                        <img width="110" class="" src="..\static\assets\img\api.png" alt="api">
                        <img width="100" class="" src="..\static\assets\img\python-logo.png" alt="python">
                        <img width="110" class="" src="..\static\assets\img\matplotlib.png" alt="matplotlib">
                        <img width="110" class="" src="..\static\assets\img\pandas.png" alt="pandas">
                        <img width="110" class="" src="..\static\assets\img\ml.png" alt="machine-learning">
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Copyright Section-->
        <section class="copyright py-4 text-center text-white">
            <div class="container"><small class="pre-wrap">Copyright © UCB BC Final Project Group 3 2020</small></div>
        </section>
        <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
        <div class="scroll-to-top d-lg-none position-fixed"><a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a></div>
        <!-- Bootstrap JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- D3 -->
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <!-- JS-->
        <script src="static/js/scripts.js"></script>
        <!-- <script src="../static/js/graphs.js"></script> -->
    </body>
    <script>
        d3.csv("../static/assets/prediction_table.csv").then(d => chart(d))

        function chart(data) {
        
            var keys = data.columns.slice(1);
        
            var parseTime = d3.timeParse("%d-%b-%Y"),
                formatDate = d3.timeFormat("%m-%d"),
                bisectDate = d3.bisector(d => d.Date).left;
                formatValue = d3.format("");
        
            data.forEach(function(d) {
                d.Date = parseTime(d.Date);
                return d;
            })
        
            var svg = d3.select("#chart"),
                margin = {top: 15, right: 35, bottom: 15, left: 35},
                width = +svg.attr("width") - margin.left - margin.right,
                height = +svg.attr("height") - margin.top - margin.bottom;
        
            var x = d3.scaleTime()
                .rangeRound([margin.left, width - margin.right])
                .domain(d3.extent(data, d => d.Date))
        
            var y = d3.scaleLinear()
                .rangeRound([height - margin.bottom, margin.top]);
        
            var z = d3.scaleOrdinal(d3.schemeCategory10);
        
            var line = d3.line()
                .curve(d3.curveCardinal)
                .x(d => x(d.Date))
                .y(d => y(d.stocks));
        
            svg.append("g")
                .attr("class","x-axis")
                .attr("transform", "translate(0," + (height - margin.bottom) + ")")
                .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%b")));
        
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", "translate(" + margin.left + ",0)");
        
            var focus = svg.append("g")
                .attr("class", "focus")
                .style("display", "none");
        
            focus.append("line").attr("class", "lineHover")
                .style("stroke", "#999")
                .attr("stroke-width", 1)
                .style("shape-rendering", "crispEdges")
                .style("opacity", 0.5)
                .attr("y1", -height)
                .attr("y2",0);
        
            focus.append("text").attr("class", "lineHoverDate")
                .attr("text-anchor", "middle")
                .attr("font-size", 15);
        
            var overlay = svg.append("rect")
                .attr("class", "overlay")
                .attr("x", margin.left)
                .attr("width", width - margin.right - margin.left)
                .attr("height", height)
        
            upDate(d3.select('#selectbox').property('value'), 0);
        
            function upDate(input, speed) {
        
                var copy = keys.filter(f => f.includes(input))
        
                var companies = copy.map(function(id) {
                    return {
                        id: id,
                        values: data.map(d => {return {Date: d.Date, stocks: +d[id]}})
                    };
                });
        
                y.domain([
                    d3.min(companies, d => d3.min(d.values, c => c.stocks)),
                    d3.max(companies, d => d3.max(d.values, c => c.stocks))
                ]).nice();
        
                svg.selectAll(".y-axis").transition()
                    .duration(speed)
                    .call(d3.axisLeft(y).tickSize(-width + margin.right + margin.left))
        
                var comp = svg.selectAll(".companies")
                    .data(companies);
        
                comp.exit().remove();
        
                comp.enter().insert("g", ".focus").append("path")
                    .attr("class", "line companies")
                    .style("stroke", d => z(d.id))
                    .merge(comp)
                .transition().duration(speed)
                    .attr("d", d => line(d.values))
        
                tooltip(copy);
            }
        
            function tooltip(copy) {
                
                var labels = focus.selectAll(".lineHoverText")
                    .data(copy)
        
                labels.enter().append("text")
                    .attr("class", "lineHoverText")
                    .style("fill", d => z(d))
                    .attr("text-anchor", "start")
                    .attr("font-size",14)
                    .attr("dy", (_, i) => 1 + i * 2 + "em")
                    .merge(labels);
        
                var circles = focus.selectAll(".hoverCircle")
                    .data(copy)
        
                circles.enter().append("circle")
                    .attr("class", "hoverCircle")
                    .style("fill", d => z(d))
                    .attr("r", 2.5)
                    .merge(circles);
        
                svg.selectAll(".overlay")
                    .on("mouseover", function() { focus.style("display", null); })
                    .on("mouseout", function() { focus.style("display", "none"); })
                    .on("mousemove", mousemove);
        
                function mousemove() {
        
                    var x0 = x.invert(d3.mouse(this)[0]),
                        i = bisectDate(data, x0, 1),
                        d0 = data[i - 1],
                        d1 = data[i],
                        d = x0 - d0.Date > d1.Date - x0 ? d1 : d0;
        
                    focus.select(".lineHover")
                        .attr("transform", "translate(" + x(d.Date) + "," + height + ")");
        
                    focus.select(".lineHoverDate")
                        .attr("transform", 
                            "translate(" + x(d.Date) + "," + (height + margin.bottom) + ")")
                        .text(formatDate(d.Date));
        
                    focus.selectAll(".hoverCircle")
                        .attr("cy", e => y(d[e]))
                        .attr("cx", x(d.Date));
        
                    focus.selectAll(".lineHoverText")
                        .attr("transform", 
                            "translate(" + (x(d.Date)) + "," + height / 2.5 + ")")
                        .text(e => e + " " + "º" + formatValue(d[e]));
        
                    x(d.Date) > (width - width / 4) 
                        ? focus.selectAll("text.lineHoverText")
                            .attr("text-anchor", "end")
                            .attr("dx", -10)
                        : focus.selectAll("text.lineHoverText")
                            .attr("text-anchor", "start")
                            .attr("dx", 10)
                }
            }
        
            var selectbox = d3.select("#selectbox")
                .on("change", function() {
                    upDate(this.value, 750);
                })
        }
    </script>
</html>